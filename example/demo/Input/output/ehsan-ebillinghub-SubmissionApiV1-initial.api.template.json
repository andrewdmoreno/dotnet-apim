{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "ApimServiceName": {
      "type": "string"
    }
  },
  "resources": [
    {
      "type": "Microsoft.ApiManagement/service/apis",
      "properties": {
        "path": "submission",
        "value": "{\r\n  \"x-generator\": \"NSwag v13.1.3.0 (NJsonSchema v10.0.27.0 (Newtonsoft.Json v12.0.0.0))\",\r\n  \"openapi\": \"3.0.0\",\r\n  \"info\": {\r\n    \"title\": \"My API\",\r\n    \"description\": \"API functionalities.\",\r\n    \"version\": \"1.0.0\"\r\n  },\r\n  \"paths\": {\r\n    \"/api/v1/SubmissionRequests/{submissionId}/invoices/{id}/attachments\": {\r\n      \"post\": {\r\n        \"tags\": [\r\n          \"Submission\"\r\n        ],\r\n        \"summary\": \"Handles attachment association request.\",\r\n        \"operationId\": \"SubmissionAttachments_Post\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"submissionId\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"description\": \"Submission request identifier.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"format\": \"guid\"\r\n            },\r\n            \"x-position\": 1\r\n          },\r\n          {\r\n            \"name\": \"id\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"description\": \"Invoice identifier.\",\r\n            \"schema\": {\r\n              \"type\": \"integer\",\r\n              \"format\": \"int64\"\r\n            },\r\n            \"x-position\": 2\r\n          },\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"application/json\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          }\r\n        ],\r\n        \"requestBody\": {\r\n          \"x-name\": \"request\",\r\n          \"description\": \"Invoice attachment association details.\",\r\n          \"content\": {\r\n            \"application/json\": {\r\n              \"schema\": {\r\n                \"nullable\": true,\r\n                \"oneOf\": [\r\n                  {\r\n                    \"$ref\": \"#/components/schemas/AssociateSubmissionAttachmentRequest\"\r\n                  }\r\n                ]\r\n              }\r\n            }\r\n          },\r\n          \"required\": true,\r\n          \"x-position\": 3\r\n        },\r\n        \"responses\": {\r\n          \"201\": {\r\n            \"description\": \"The request was created successfully.\"\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"404\": {\r\n            \"description\": \"The requested resource could not be found.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"409\": {\r\n            \"description\": \"The request could not be processed because of conflict in the current state of the resource.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request could not be processed because of conflict in the current state of the resource.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/api/v1/SubmissionRequests\": {\r\n      \"post\": {\r\n        \"tags\": [\r\n          \"Submission\"\r\n        ],\r\n        \"summary\": \"Create a submission request.\",\r\n        \"operationId\": \"SubmissionRequests_Post\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"application/json\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          }\r\n        ],\r\n        \"requestBody\": {\r\n          \"x-name\": \"submissionRequest\",\r\n          \"description\": \"The CreateSubmissionRequestRequest.\",\r\n          \"content\": {\r\n            \"application/json\": {\r\n              \"schema\": {\r\n                \"nullable\": true,\r\n                \"oneOf\": [\r\n                  {\r\n                    \"$ref\": \"#/components/schemas/CreateSubmissionRequestRequest\"\r\n                  }\r\n                ]\r\n              }\r\n            }\r\n          },\r\n          \"required\": true,\r\n          \"x-position\": 1\r\n        },\r\n        \"responses\": {\r\n          \"201\": {\r\n            \"description\": \"The request was created successfully.\"\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"406\": {\r\n            \"description\": \"Provided Accept HTTP Header is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Provided Accept HTTP Header is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"413\": {\r\n            \"description\": \"Too large payload size.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Too large payload size.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"415\": {\r\n            \"description\": \"The request entity has a media type which is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request entity has a media type which is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/api/v1/SubmissionRequests/{submissionId}/invoices/{id}/ready\": {\r\n      \"put\": {\r\n        \"tags\": [\r\n          \"Submission\"\r\n        ],\r\n        \"summary\": \"Commits particular submission result to vendor.\",\r\n        \"operationId\": \"SubmissionRequests_CommitInvoice\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"submissionId\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"description\": \"Submission request Id.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"format\": \"guid\"\r\n            },\r\n            \"x-position\": 1\r\n          },\r\n          {\r\n            \"name\": \"id\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"description\": \"Invoice identifier.\",\r\n            \"schema\": {\r\n              \"type\": \"integer\",\r\n              \"format\": \"int64\"\r\n            },\r\n            \"x-position\": 2\r\n          },\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"application/json\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          }\r\n        ],\r\n        \"responses\": {\r\n          \"204\": {\r\n            \"description\": \"The request was successfully processed.\"\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"404\": {\r\n            \"description\": \"The requested resource could not be found.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"409\": {\r\n            \"description\": \"The request could not be processed because of conflict in the current state of the resource.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request could not be processed because of conflict in the current state of the resource.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \"components\": {\r\n    \"schemas\": {\r\n      \"AssociateSubmissionAttachmentRequest\": {\r\n        \"type\": \"object\",\r\n        \"description\": \"The invoice attachment post request.\",\r\n        \"additionalProperties\": false,\r\n        \"required\": [\r\n          \"AttachmentId\"\r\n        ],\r\n        \"properties\": {\r\n          \"AttachmentId\": {\r\n            \"type\": \"string\",\r\n            \"description\": \"Gets or sets an id returned in response from Attachment API POST request.\",\r\n            \"format\": \"guid\",\r\n            \"minLength\": 1\r\n          },\r\n          \"AssociatedElementType\": {\r\n            \"description\": \"Gets or sets a type of invoice’s node that the attachment is related to.\",\r\n            \"oneOf\": [\r\n              {\r\n                \"$ref\": \"#/components/schemas/AssociatedElementType\"\r\n              }\r\n            ]\r\n          },\r\n          \"AssociatedElementId\": {\r\n            \"type\": \"string\",\r\n            \"description\": \"Gets or sets an identifier of invoice’s node that the attachment is related to.\",\r\n            \"nullable\": true\r\n          }\r\n        }\r\n      },\r\n      \"AssociatedElementType\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"\",\r\n        \"x-enumNames\": [\r\n          \"Invoice\",\r\n          \"Fee\",\r\n          \"Expense\"\r\n        ],\r\n        \"enum\": [\r\n          \"Invoice\",\r\n          \"Fee\",\r\n          \"Expense\"\r\n        ]\r\n      },\r\n      \"CreateSubmissionRequestRequest\": {\r\n        \"type\": \"object\",\r\n        \"description\": \"The submission request model.\",\r\n        \"additionalProperties\": false,\r\n        \"properties\": {\r\n          \"InvoicePayload\": {\r\n            \"type\": \"string\",\r\n            \"description\": \"Gets or sets the invoice payload\",\r\n            \"nullable\": true\r\n          },\r\n          \"InvoiceType\": {\r\n            \"description\": \"Gets or sets type of the submitting invoice.\",\r\n            \"nullable\": true,\r\n            \"oneOf\": [\r\n              {\r\n                \"$ref\": \"#/components/schemas/InvoiceType\"\r\n              }\r\n            ]\r\n          },\r\n          \"InvoiceState\": {\r\n            \"description\": \"Gets or sets type of the submitting invoice state.\",\r\n            \"nullable\": true,\r\n            \"oneOf\": [\r\n              {\r\n                \"$ref\": \"#/components/schemas/InvoiceState\"\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      },\r\n      \"InvoiceType\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"\",\r\n        \"x-enumNames\": [\r\n          \"UBF\",\r\n          \"MultipleInvoiceUBF\",\r\n          \"TimeEntryInvoice\",\r\n          \"ESF\",\r\n          \"LEDES\",\r\n          \"TimeEntryESF\",\r\n          \"Ledes98B\",\r\n          \"Ledes98BI\",\r\n          \"Ledes98BIV2\",\r\n          \"Ledes2000\",\r\n          \"LedesXml20\",\r\n          \"LedesXml21\"\r\n        ],\r\n        \"enum\": [\r\n          \"UBF\",\r\n          \"MultipleInvoiceUBF\",\r\n          \"TimeEntryInvoice\",\r\n          \"ESF\",\r\n          \"LEDES\",\r\n          \"TimeEntryESF\",\r\n          \"Ledes98B\",\r\n          \"Ledes98BI\",\r\n          \"Ledes98BIV2\",\r\n          \"Ledes2000\",\r\n          \"LedesXml20\",\r\n          \"LedesXml21\"\r\n        ]\r\n      },\r\n      \"InvoiceState\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"\",\r\n        \"x-enumNames\": [\r\n          \"Proforma\",\r\n          \"FinalInvoice\"\r\n        ],\r\n        \"enum\": [\r\n          \"Proforma\",\r\n          \"FinalInvoice\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}",
        "format": "openapi+json"
      },
      "name": "[concat(parameters('ApimServiceName'), '/SubmissionApiV1')]",
      "apiVersion": "2019-01-01",
      "dependsOn": []
    }
  ]
}