{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "ApimServiceName": {
      "type": "string"
    }
  },
  "resources": [
    {
      "type": "Microsoft.ApiManagement/service/apis",
      "properties": {
        "path": "invoice-viewer",
        "value": "{\r\n  \"x-generator\": \"NSwag v13.1.3.0 (NJsonSchema v10.0.27.0 (Newtonsoft.Json v12.0.0.0))\",\r\n  \"openapi\": \"3.0.0\",\r\n  \"info\": {\r\n    \"title\": \"My API\",\r\n    \"description\": \"API functionalities.\",\r\n    \"version\": \"1.0.0\"\r\n  },\r\n  \"paths\": {\r\n    \"/api/v1/Ledes\": {\r\n      \"get\": {\r\n        \"tags\": [\r\n          \"InvoiceViewer\"\r\n        ],\r\n        \"summary\": \"Gets a ledes transformation request history.\",\r\n        \"operationId\": \"LedesHistory_GetHistory\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"InvoiceId\",\r\n            \"in\": \"query\",\r\n            \"description\": \"Gets or sets a producer's invoice id.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": true\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"PayorOrgId\",\r\n            \"in\": \"query\",\r\n            \"description\": \"Gets or sets an id of the payor organization.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": true\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"CallType\",\r\n            \"in\": \"query\",\r\n            \"description\": \"Gets or sets the type of the LEDES file.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": true\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"StartDate\",\r\n            \"in\": \"query\",\r\n            \"description\": \"Gets or sets a start date edge after which the invoice was submitted.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"format\": \"date-time\",\r\n              \"nullable\": true\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"EndDate\",\r\n            \"in\": \"query\",\r\n            \"description\": \"Gets or sets an end date edge before which the invoice was submitted.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"format\": \"date-time\",\r\n              \"nullable\": true\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"application/json\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          }\r\n        ],\r\n        \"responses\": {\r\n          \"200\": {\r\n            \"description\": \"The request was successful. See the response body for details.\"\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"406\": {\r\n            \"description\": \"Provided Accept HTTP Header is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Provided Accept HTTP Header is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      },\r\n      \"post\": {\r\n        \"tags\": [\r\n          \"InvoiceViewer\"\r\n        ],\r\n        \"summary\": \"Process a ledes transformation request.\",\r\n        \"operationId\": \"Ledes_Post\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"text/plain\",\r\n                \"application/octet-stream\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"OutputInvoiceType\",\r\n            \"in\": \"query\",\r\n            \"description\": \"Specifies the expected LEDES output type.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"Ledes98B\",\r\n                \"Ledes98BI\",\r\n                \"Ledes2000\",\r\n                \"LedesXml20\",\r\n                \"LedesXml21\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"CallType\",\r\n            \"in\": \"query\",\r\n            \"description\": \"Specifies whether the LEDES file is the final or a preview one.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"Final\",\r\n                \"Preview\"\r\n              ]\r\n            }\r\n          }\r\n        ],\r\n        \"requestBody\": {\r\n          \"x-name\": \"Request body\",\r\n          \"description\": \"ESF payload (single-payor)\",\r\n          \"content\": {\r\n            \"application/json\": {\r\n              \"schema\": {\r\n                \"type\": \"string\"\r\n              }\r\n            }\r\n          },\r\n          \"required\": true\r\n        },\r\n        \"responses\": {\r\n          \"201\": {\r\n            \"description\": \"The request was created successfully.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": \"The payload xml.\"\r\n              }\r\n            }\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"406\": {\r\n            \"description\": \"Provided Accept HTTP Header is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Provided Accept HTTP Header is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"413\": {\r\n            \"description\": \"Too large payload size.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Too large payload size.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"415\": {\r\n            \"description\": \"The request entity has a media type which is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request entity has a media type which is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/api/v1/Ledes/{id}\": {\r\n      \"get\": {\r\n        \"tags\": [\r\n          \"InvoiceViewer\"\r\n        ],\r\n        \"summary\": \"Gets the ledes request invoice payload.\",\r\n        \"operationId\": \"Ledes_Get\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"id\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"description\": \"The identifier of a successfully created ledes request file.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"format\": \"guid\"\r\n            },\r\n            \"x-position\": 1\r\n          },\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"text/plain\",\r\n                \"application/octet-stream\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          }\r\n        ],\r\n        \"responses\": {\r\n          \"200\": {\r\n            \"description\": \"The request was successful. See the response body for details.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": \"The payload xml.\"\r\n              }\r\n            }\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"404\": {\r\n            \"description\": \"The requested resource could not be found.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"406\": {\r\n            \"description\": \"Provided Accept HTTP Header is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Provided Accept HTTP Header is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/api/v1/Ledes/{invoiceId}/{payorOrgId}\": {\r\n      \"get\": {\r\n        \"tags\": [\r\n          \"InvoiceViewer\"\r\n        ],\r\n        \"summary\": \"Gets the ledes request invoice payload by invoiceId and payorOrgId.\",\r\n        \"operationId\": \"Ledes_GetLast\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"invoiceId\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"description\": \"The invoiceId of a successfully created ledes request file.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": true\r\n            },\r\n            \"x-position\": 1\r\n          },\r\n          {\r\n            \"name\": \"payorOrgId\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"description\": \"The payorOrgId of a successfully created ledes request file.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": true\r\n            },\r\n            \"x-position\": 2\r\n          },\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"text/plain\",\r\n                \"application/octet-stream\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          }\r\n        ],\r\n        \"responses\": {\r\n          \"200\": {\r\n            \"description\": \"The request was successful. See the response body for details.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": \"The payload xml.\"\r\n              }\r\n            }\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"404\": {\r\n            \"description\": \"The requested resource could not be found.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"406\": {\r\n            \"description\": \"Provided Accept HTTP Header is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Provided Accept HTTP Header is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \"components\": {\r\n    \"schemas\": {\r\n      \"CreateLedesRequest\": {\r\n        \"type\": \"object\",\r\n        \"description\": \"The create ledes request model.\",\r\n        \"additionalProperties\": false,\r\n        \"properties\": {\r\n          \"InvoicePayload\": {\r\n            \"type\": \"string\",\r\n            \"description\": \"Gets or sets the invoice payload\",\r\n            \"nullable\": true\r\n          },\r\n          \"OutputInvoiceType\": {\r\n            \"description\": \"Gets or sets the expected Ledes output type.\",\r\n            \"nullable\": true,\r\n            \"oneOf\": [\r\n              {\r\n                \"$ref\": \"#/components/schemas/InvoiceType\"\r\n              }\r\n            ]\r\n          },\r\n          \"CallType\": {\r\n            \"description\": \"Gets or sets the call type.\",\r\n            \"nullable\": true,\r\n            \"oneOf\": [\r\n              {\r\n                \"$ref\": \"#/components/schemas/CallType\"\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      },\r\n      \"InvoiceType\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"\",\r\n        \"x-enumNames\": [\r\n          \"UBF\",\r\n          \"MultipleInvoiceUBF\",\r\n          \"TimeEntryInvoice\",\r\n          \"ESF\",\r\n          \"LEDES\",\r\n          \"TimeEntryESF\",\r\n          \"Ledes98B\",\r\n          \"Ledes98BI\",\r\n          \"Ledes98BIV2\",\r\n          \"Ledes2000\",\r\n          \"LedesXml20\",\r\n          \"LedesXml21\"\r\n        ],\r\n        \"enum\": [\r\n          \"UBF\",\r\n          \"MultipleInvoiceUBF\",\r\n          \"TimeEntryInvoice\",\r\n          \"ESF\",\r\n          \"LEDES\",\r\n          \"TimeEntryESF\",\r\n          \"Ledes98B\",\r\n          \"Ledes98BI\",\r\n          \"Ledes98BIV2\",\r\n          \"Ledes2000\",\r\n          \"LedesXml20\",\r\n          \"LedesXml21\"\r\n        ]\r\n      },\r\n      \"CallType\": {\r\n        \"type\": \"string\",\r\n        \"description\": \"\",\r\n        \"x-enumNames\": [\r\n          \"Final\",\r\n          \"Preview\"\r\n        ],\r\n        \"enum\": [\r\n          \"Final\",\r\n          \"Preview\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}",
        "format": "openapi+json"
      },
      "name": "[concat(parameters('ApimServiceName'), '/InvoiceViewerApiV1')]",
      "apiVersion": "2019-01-01",
      "dependsOn": []
    }
  ]
}