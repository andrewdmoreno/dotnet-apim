{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "ApimServiceName": {
      "type": "string"
    }
  },
  "resources": [
    {
      "type": "Microsoft.ApiManagement/service/apis",
      "properties": {
        "path": "attachments",
        "value": "{\r\n  \"x-generator\": \"NSwag v13.1.3.0 (NJsonSchema v10.0.27.0 (Newtonsoft.Json v12.0.0.0))\",\r\n  \"openapi\": \"3.0.0\",\r\n  \"info\": {\r\n    \"title\": \"My API\",\r\n    \"description\": \"API functionalities.\",\r\n    \"version\": \"1.0.0\"\r\n  },\r\n  \"paths\": {\r\n    \"/api/Attachment\": {\r\n      \"post\": {\r\n        \"tags\": [\r\n          \"Attachment\"\r\n        ],\r\n        \"summary\": \"Uploads an attachment.\",\r\n        \"operationId\": \"Attachment_Post\",\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"Accept\",\r\n            \"in\": \"header\",\r\n            \"description\": \"Specify certain media types which are acceptable for the response.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"enum\": [\r\n                \"application/json\",\r\n                \"*/*\"\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"ProducerId\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Id of the producer submitting the request.  The ProducerId in the header must match the ProducerId passed in the original request body.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Provider\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The access token provided by your service provider.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Username\",\r\n            \"in\": \"header\",\r\n            \"description\": \"The username of the user submitting the request.  This value is used for reporting purposes only.  Usernames are defined by the caller.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"nullable\": false\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"Content-Disposition\",\r\n            \"in\": \"header\",\r\n            \"required\": true,\r\n            \"description\": \"The Filename.\",\r\n            \"schema\": {\r\n              \"type\": \"string\",\r\n              \"pattern\": \"^attachment: filename=\\\".*\\\"$\"\r\n            }\r\n          }\r\n        ],\r\n        \"requestBody\": {\r\n          \"x-name\": \"Request body\",\r\n          \"description\": \"The attachment file.\",\r\n          \"content\": {\r\n            \"application/json\": {\r\n              \"schema\": {\r\n                \"type\": \"object\"\r\n              }\r\n            }\r\n          },\r\n          \"required\": true\r\n        },\r\n        \"responses\": {\r\n          \"201\": {\r\n            \"description\": \"The request was created successfully.\"\r\n          },\r\n          \"400\": {\r\n            \"description\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request was incorrectly formatted of missing required headers or parameters.\",\r\n                  \"ModelState\": null\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"401\": {\r\n            \"description\": \"The provider key is not authorized.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"StatusCode\": 401,\r\n                  \"Message\": \"The provider key is not authorized.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"403\": {\r\n            \"description\": \"The requestor is not authorized to view the response.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The requestor is not authorized to view the response.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"406\": {\r\n            \"description\": \"Provided Accept HTTP Header is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Provided Accept HTTP Header is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"415\": {\r\n            \"description\": \"The request entity has a media type which is not supported.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"The request entity has a media type which is not supported.\"\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"500\": {\r\n            \"description\": \"Something went wrong.\",\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"example\": {\r\n                  \"Message\": \"Something went wrong.\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"servers\": [\r\n          {\r\n            \"url\": \"192.175.0.1\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \"components\": {\r\n    \"schemas\": {\r\n      \"CreateAttachmentRequest\": {\r\n        \"type\": \"object\",\r\n        \"description\": \"The attachment request POST model.\",\r\n        \"additionalProperties\": false,\r\n        \"properties\": {\r\n          \"File\": {\r\n            \"description\": \"Gets or sets the HttpFile.\",\r\n            \"nullable\": true,\r\n            \"oneOf\": [\r\n              {\r\n                \"$ref\": \"#/components/schemas/HttpFile\"\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      },\r\n      \"HttpFile\": {\r\n        \"type\": \"object\",\r\n        \"additionalProperties\": false,\r\n        \"properties\": {\r\n          \"Name\": {\r\n            \"type\": \"string\",\r\n            \"nullable\": true\r\n          },\r\n          \"ContentType\": {\r\n            \"type\": \"string\",\r\n            \"nullable\": true\r\n          },\r\n          \"Content\": {\r\n            \"type\": \"string\",\r\n            \"format\": \"byte\",\r\n            \"nullable\": true\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}",
        "format": "openapi+json"
      },
      "name": "[concat(parameters('ApimServiceName'), '/AttachmentApiV1')]",
      "apiVersion": "2019-01-01",
      "dependsOn": []
    }
  ]
}