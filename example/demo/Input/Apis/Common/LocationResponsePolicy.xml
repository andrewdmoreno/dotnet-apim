<policies>
    <inbound>
        <base />
    </inbound>
    <backend>
        <base />
    </backend>
    <outbound>
        <base />
        <set-header name="Location" exists-action="override">
            <value>@{
				var locationHeader = context.Response.Headers.GetValueOrDefault("Location", "");
				if(!String.IsNullOrWhiteSpace(locationHeader)){
				var location = new Uri(locationHeader);
				return    string.Format("{0}://{1}{2}{3}",context.Request.OriginalUrl.Scheme,
				context.Request.OriginalUrl.Host,
				context.Api.Path,
				location.PathAndQuery);
				}
				else {
				return  ""	;
				}
			
			}</value>
        </set-header>
    </outbound>
    <on-error>
        <base />
    </on-error>
</policies>